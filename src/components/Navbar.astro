---
import { Menu, X } from "@lucide/astro";

const whatsappLink = "https://wa.me/351926722130?text=Olá%20Ney%2C%20vi%20o%20seu%20site%20e%20gostaria%20de%20saber%20mais%20sobre%20os%20seus%20serviços";
---

<nav id="navbar" class="fixed top-0 left-0 right-0 z-50 bg-bg/80 backdrop-blur-md border-b border-primary/5 transition-all duration-300">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      <!-- Logo -->
      <a href="/" class="text-xl font-bold text-primary">
        Ney Carvalho
      </a>

      <!-- Desktop Nav -->
      <div class="hidden md:flex items-center gap-8">
        <a href="#servicos" class="text-sm font-medium text-text-light hover:text-primary transition-colors">Serviços</a>
        <a href="#precos" class="text-sm font-medium text-text-light hover:text-primary transition-colors">Preços</a>
        <a href="#portfolio" class="text-sm font-medium text-text-light hover:text-primary transition-colors">Portfolio</a>
        <a href="#contacto" class="text-sm font-medium text-text-light hover:text-primary transition-colors">Contacto</a>
        <a
          href={whatsappLink}
          target="_blank"
          rel="noopener noreferrer"
          class="inline-flex items-center gap-2 bg-accent hover:bg-accent-hover text-white text-sm font-semibold px-5 py-2.5 rounded-full transition-colors"
        >
          Fala comigo
        </a>
      </div>

      <!-- Mobile menu button -->
      <button
        id="mobile-menu-btn"
        class="md:hidden p-2 text-text-light hover:text-primary transition-colors"
        aria-label="Abrir menu"
      >
        <div id="menu-icon-open">
          <Menu size={24} strokeWidth={1.5} />
        </div>
        <div id="menu-icon-close" class="hidden">
          <X size={24} strokeWidth={1.5} />
        </div>
      </button>
    </div>
  </div>

  <!-- Mobile menu -->
  <div id="mobile-menu" class="hidden md:hidden bg-bg/95 backdrop-blur-md border-t border-primary/5">
    <div class="px-4 py-4 space-y-3">
      <a href="#servicos" class="block text-sm font-medium text-text-light hover:text-primary transition-colors py-2">Serviços</a>
      <a href="#precos" class="block text-sm font-medium text-text-light hover:text-primary transition-colors py-2">Preços</a>
      <a href="#portfolio" class="block text-sm font-medium text-text-light hover:text-primary transition-colors py-2">Portfolio</a>
      <a href="#contacto" class="block text-sm font-medium text-text-light hover:text-primary transition-colors py-2">Contacto</a>
      <a
        href={whatsappLink}
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center gap-2 bg-accent hover:bg-accent-hover text-white text-sm font-semibold px-5 py-2.5 rounded-full transition-colors"
      >
        Fala comigo
      </a>
    </div>
  </div>
</nav>

<script>
  const btn = document.getElementById('mobile-menu-btn');
  const menu = document.getElementById('mobile-menu');
  const iconOpen = document.getElementById('menu-icon-open');
  const iconClose = document.getElementById('menu-icon-close');

  btn?.addEventListener('click', () => {
    const isOpen = !menu?.classList.contains('hidden');
    menu?.classList.toggle('hidden');
    iconOpen?.classList.toggle('hidden');
    iconClose?.classList.toggle('hidden');
  });

  // Close menu on link click
  menu?.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', () => {
      menu?.classList.add('hidden');
      iconOpen?.classList.remove('hidden');
      iconClose?.classList.add('hidden');
    });
  });
</script>
